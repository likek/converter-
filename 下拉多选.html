<html>
<head>
    <title></title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="converter.css">
    <script src="./base/forms/install.js"></script>
    <script src="./base/FIIS.js"></script>
    <script src="./base/app.js"></script>
    <script src="converter.js"></script>
    <script type="text/javascript">
        var data = [];
        for (var i = 0; i < 1000; i++) {
            data.push({
                ModalityName: "data_" + i,
                ModalityCode: i + ""
            });
        }
        var modalityList = {
            "ErrorCode": "0000",
            "Result": data,
        };
        var modalityListStyle = {
            'displayMember': 'ModalityName', 'valueMember': 'ModalityCode',
            'classSelectdItem':"CheckboxDroplistConv-SelectdItem",
            'classUnselectdItem':"CheckboxDroplistConv-UnselectdItem",
            'classMenu':"CheckboxDroplistConv-Menu",
            'classInput':'CheckboxDroplistConv-Input',
            'classFilterInput':'CheckboxDroplistConv-FilterInput',
        };
        var loginForm;

        function init() {
            var tb = document.getElementById("tb");
            loginForm = new LoginForm(document.body);
            formCallCenter.RegisterForm("LoginModule", loginForm);
        }

        function LoginForm() {
            FIISForm.apply(this, arguments);
        }
    </script>

</head>
<body onload="init()" id="tb">

<input type="button" value="读取值"
       onclick="alert(formCallCenter.DetectFormByElement(this).GetField('currModality').getJsonRaw());"/>

<button onclick="loginForm.SetField('currModality',[data.slice(6,9)])">
    设置多选值
</button>


<!--不可过滤-->
<!--<div field="ModalityList" condfields="Identity" itemfield="currModality" itemlocalfield="true"
     valuechanged="valueChanged" conv="FIISForm.CheckboxDroplistConv(modalityListStyle)"
     requester="FIISForm.JSObjectRequester(modalityList)"
     style="width: 240px;height: 30px;border:1px solid #666;">
</div>-->


<!--可过滤-->
<div field="ModalityList" itemfield="currModality" itemlocalfield="true"
     conv="FIISForm.FilterableCheckboxDroplistConv(modalityListStyle)"
     requester="FIISForm.JSObjectRequester(modalityList)"
     style="width: 240px;height: 30px;border:1px solid #666;">
</div>


</body>
</html>